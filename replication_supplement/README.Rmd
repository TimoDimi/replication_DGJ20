---
title: "Plots in Supplementary Material"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Install packages

Install the `reliabilitydiag` package located in the root directory.
The `here` package identifies that directory by the location of the replication_DGJ20.Rproj file.

```{r eval = FALSE}
library(here)
devtools::install_local(here("reliabilitydiag_0.1.0.tar.gz"))
library(reliabilitydiag)
```

*Should we be providing frozen versions of all the packages that are used?*

### Required packages and compilation environment

```{r message = FALSE}
library(here)
library(rlist)
library(tibble)
library(EnvStats)
library(ggplot2)
library(dplyr)
library(doParallel)
library(RColorBrewer)
library(reshape2)
library(devtools)
library(ggExtra)
library(gridExtra)

sessionInfo()

```


## Section S1: Experimental data sets

### Required CRAN packages

- rlist
- tibble
- EnvStats
- ggplot2
- dplyr
- doParallel
- RColorBrewer
- reshape2
- here

### Plots for Fig S1
```{r DGPs_DataDriven, message=FALSE, warning=FALSE, fig.width = 20, fig.height = 5, fig.keep = 1:3}
source("DGPs_DataDriven.R", local = knitr::knit_global())
```

```{r DGPs_DataDriven2, fig.width = 15, fig.height = 10}
gridExtra::grid.arrange(p.SPF)
```


## Section S2: (In)stability: Illustrative examples

### Required CRAN packages

- gridExtra
- reliabilitydiag
- here

### Plots for Fig S2--S5

```{r Instabilities_QBinning, message = FALSE, fig.width = 20, fig.height = 20}
source("Instabilities_QBinning.R", local = knitr::knit_global())
```


## Section S4: Uncertainty quantification: Data driven simulations

### Required CRAN packages

- doParallel
- dplyr
- tibble
- ggplot2
- reliabilitydiag
- here

### Plots for Fig S6--S9

The simulations are only rerun when the `runSimulations` variable in
`"sim_Coverage_Bands_DataDriven.R"` is `TRUE`.

```{r sim_Coverage_Bands_DataDriven, message = FALSE, fig.width = 15, fig.height = 15}
source("sim_Coverage_Bands_DataDriven.R", local = knitr::knit_global())
```


## Section S5: Statistical efficiency of CORP: Data driven simulations

### Required CRAN packages

- rlist
- tibble
- devtools
- EnvStats
- ggplot2
- dplyr
- doParallel
- RColorBrewer
- reshape2
- reliabilitydiag
- here


### Plots for Fig S10--S13

The simulations are only rerun when the `runSimulations` variable in
`"sim_Efficiency_DataDriven.R"` is `TRUE`.

```{r sim_Efficiency_DataDriven, message = FALSE, fig.width = 15, fig.height = 15}
source("sim_Efficiency_DataDriven.R", local = knitr::knit_global())
```


## Section S6: CORP discrimination diagrams

### Required CRAN packages

- reliabilitydiag
- dplyr
- ggplot2
- ggExtra
- here

### Plots for Fig S14

```{r discrimination_diagrams, message = FALSE, fig.width = 20, fig.height = 5}
source("discrimination_diagrams.R", local = knitr::knit_global())
```

